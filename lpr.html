<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estado del Taller</title>

  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

  <div id="nav-container"></div>

  <div class="dashboard-container">

    <h2 class="titulo-kanban">Estado del Taller</h2>

    <div id="kanban-container" class="kanban-grid"></div>

    <div class="kanban-footer">
      <div class="footer-left">
        <span id="totalEnTaller"></span>
      </div>

      <div class="footer-center">
        <span id="ultimaActualizacion"></span>
      </div>

      <div class="footer-right">
        <button id="btn-gestionar-internos" class="btn-footer" style="display: none; margin-right: 10px; background-color: #d9534f;">
          üö´ Internos
        </button>

        <button id="btn-ver-salidas" class="btn-footer">
          Veh√≠culos que salieron
        </button>
      </div>
    </div>
  </div>

  <div id="modal-vehiculo" class="modal-vehiculo">
    <div class="modal-content">
      <span id="modal-close" class="close">&times;</span>

      <h3 id="modal-placa"></h3>

      <p><b>Estaci√≥n actual:</b> <span id="modal-estacion"></span></p>
      <p><b>Tiempo en estaci√≥n:</b> <span id="modal-tiempo-estacion"></span></p>
      <p><b>Tiempo total en taller:</b> <span id="modal-tiempo-total"></span></p>

      <h4>Historial reciente</h4>
      <ul id="modal-historial"></ul>

      <button id="btn-historial-completo" class="btn-nav" style="margin-top:15px;">
        Ver historial completo
      </button>
    </div>
  </div>

  <div id="modal-historial-completo" class="modal-vehiculo">
    <div class="modal-content" style="width: 800px;">
      <span id="modal-historial-close" class="close">&times;</span>

      <h3>Historial completo del veh√≠culo</h3>

      <table>
        <thead>
          <tr>
            <th>Estaci√≥n</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Tiempo en estaci√≥n</th>
          </tr>
        </thead>
        <tbody id="tabla-historial-completo"></tbody>
      </table>
    </div>
  </div>

  <div id="modal-salidas" class="modal-vehiculo">
    <div class="modal-content" style="width: 900px;">
      <span id="modal-salidas-close" class="close">&times;</span>

      <h3>Veh√≠culos que salieron</h3>

      <div style="display:flex; gap:10px; margin-bottom:15px;">
        <input type="date" id="salidas-desde">
        <input type="date" id="salidas-hasta">
        <input type="text" id="salidas-placa" placeholder="Buscar placa">
        <button id="btn-filtrar-salidas" class="btn-nav">Filtrar</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Placa</th>
            <th>Entrada</th>
            <th>Salida</th>
            <th>Tiempo total</th>
          </tr>
        </thead>
        <tbody id="tabla-salidas"></tbody>
      </table>

      <div class="pagination-controls">
        <button id="salidas-prev">‚óÄ</button>
        <span id="salidas-page-info"></span>
        <button id="salidas-next">‚ñ∂</button>
      </div>
    </div>
  </div>

  <div id="modal-internos" class="modal-vehiculo">
    <div class="modal-content" style="width: 600px;">
      <span id="close-internos" class="close">&times;</span>

      <h3>üö´ Veh√≠culos Internos (Excluidos)</h3>
      <p style="font-size: 0.9em; color: #555; margin-bottom: 15px;">
        Estos veh√≠culos ser√°n ignorados por las c√°maras y no generar√°n registros.
      </p>

      <div style="display:flex; gap:10px; margin-bottom:20px; align-items: center;">
        <input type="text" id="input-placa-interna" placeholder="Placa (ej: PBA1234)" style="flex:1; padding: 8px; text-transform: uppercase;">
        <input type="text" id="input-desc-interna" placeholder="Descripci√≥n (ej: Camioneta Taller)" style="flex:2; padding: 8px;">
        <button id="btn-agregar-interno" class="btn-nav" style="background-color: #28a745; color: white; border: none;">Agregar</button>
      </div>

      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: #f1f1f1; text-align: left;">
            <th style="padding: 8px;">Placa</th>
            <th style="padding: 8px;">Descripci√≥n</th>
            <th style="padding: 8px; text-align: center;">Acci√≥n</th>
          </tr>
        </thead>
        <tbody id="tabla-internos-body">
          </tbody>
      </table>
    </div>
  </div>

  <script src="js/auth.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/lpr.js"></script>

</body>
</html>