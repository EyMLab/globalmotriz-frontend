<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estado del Taller</title>

  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

  <div id="nav-container"></div>

  <div class="dashboard-container">

    <h2 class="titulo-kanban">Estado del Taller</h2>

    <div id="kanban-container" class="kanban-grid"></div>

    <div class="kanban-footer">
      <span id="totalEnTaller"></span>
      <span id="ultimaActualizacion"></span>

      <button id="btn-ver-salidas" class="btn-nav">
        Vehículos que salieron
      </button>
    </div>

  </div>

  <!-- ================= MODAL VEHÍCULO ================= -->
  <div id="modal-vehiculo" class="modal-vehiculo">
    <div class="modal-content">
      <span id="modal-close">&times;</span>

      <h3 id="modal-placa"></h3>

      <p><b>Estación actual:</b> <span id="modal-estacion"></span></p>
      <p><b>Tiempo en estación:</b> <span id="modal-tiempo-estacion"></span></p>
      <p><b>Tiempo total en taller:</b> <span id="modal-tiempo-total"></span></p>

      <h4>Historial reciente</h4>
      <ul id="modal-historial"></ul>

      <button id="btn-historial-completo" class="btn-nav" style="margin-top:15px;">
        Ver historial completo
      </button>
    </div>
  </div>

  <!-- ============ MODAL HISTORIAL COMPLETO ============ -->
  <div id="modal-historial-completo" class="modal-vehiculo">
    <div class="modal-content" style="width: 800px;">
      <span id="modal-historial-close">&times;</span>

      <h3>Historial completo del vehículo</h3>

      <table>
        <thead>
          <tr>
            <th>Estación</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Tiempo en estación</th>
          </tr>
        </thead>
        <tbody id="tabla-historial-completo"></tbody>
      </table>
    </div>
  </div>

  <!-- ============ MODAL VEHÍCULOS QUE SALIERON ============ -->
  <div id="modal-salidas" class="modal-vehiculo">
    <div class="modal-content" style="width: 900px;">
      <span id="modal-salidas-close">&times;</span>

      <h3>Vehículos que salieron</h3>

      <div style="display:flex; gap:10px; margin-bottom:15px;">
        <input type="date" id="salidas-desde">
        <input type="date" id="salidas-hasta">
        <input type="text" id="salidas-placa" placeholder="Buscar placa">
        <button id="btn-filtrar-salidas" class="btn-nav">Filtrar</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Placa</th>
            <th>Entrada</th>
            <th>Salida</th>
            <th>Tiempo total</th>
          </tr>
        </thead>
        <tbody id="tabla-salidas"></tbody>
      </table>

      <div class="pagination-controls">
        <button id="salidas-prev">◀</button>
        <span id="salidas-page-info"></span>
        <button id="salidas-next">▶</button>
      </div>
    </div>
  </div>

  <script src="js/auth.js"></script>
  <script src="js/nav.js"></script>
  <script src="js/lpr.js"></script>

</body>
</html>
